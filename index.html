<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>task_4</title>
	<script  src="jQuery.js"></script>
	<link rel="stylesheet" href="bootstrap.css">
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-1 margin_unset nomber">
				<div class="col-12 tab_first"></div>
				<div class="col-12 tabs">8</div>
				<div class="col-12 tabs">7</div>
				<div class="col-12 tabs">6</div>
				<div class="col-12 tabs">5</div>
				<div class="col-12 tabs">4</div>
				<div class="col-12 tabs">3</div>
				<div class="col-12 tabs">2</div>
				<div class="col-12 tabs">1</div>
			</div>
			<div class="col-5 margin_unset once">
					<div class="line row">
						<div class="col-3 text-center chars">A</div>
						<div class="col-3 text-center chars">B</div>
						<div class="col-3 text-center chars">C</div>
						<div class="col-3 text-center chars">D</div>
					</div>
					<div class="line row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line_us row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line_us row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line_us row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line_us row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 text-center chars">A</div>
						<div class="col-3 text-center chars">B</div>
						<div class="col-3 text-center chars">C</div>
						<div class="col-3 text-center chars">D</div>
					</div>
			</div>
			<div class="col-5 margin_unset second">
					<div class="line row">
						<div class="col-3 text-center chars">E</div>
						<div class="col-3 text-center chars">F</div>
						<div class="col-3 text-center chars">G</div>
						<div class="col-3 text-center chars">H</div>
					</div>
					<div class="line_us row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line_us row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line_us row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line_us row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
						<div class="col-3 tab"></div>
					</div>
					<div class="line row">
						<div class="col-3 text-center chars">E</div>
						<div class="col-3 text-center chars">F</div>
						<div class="col-3 text-center chars">G</div>
						<div class="col-3 text-center chars">H</div>
					</div>
			</div>
			<div class="col-1 margin_unset nomber">
				<div class="col-12 tab_first"></div>
				<div class="col-12 tabs">8</div>
				<div class="col-12 tabs">7</div>
				<div class="col-12 tabs">6</div>
				<div class="col-12 tabs">5</div>
				<div class="col-12 tabs">4</div>
				<div class="col-12 tabs">3</div>
				<div class="col-12 tabs">2</div>
				<div class="col-12 tabs">1</div>
			</div>
		</div>
	</div>

<script>
	// сверстано 2 блока (Доска делится вертикально once second) соответственно и заполнять id буду соответствующим образом
	$(document).ready(function () {
		let increment = 0, massOnce = $('.once').find('.tab'), massSecond = $('.second').find('.tab'), massXOnce = ['A', 'B', 'C', 'D'], inc = 5,
		massXSecond = ['E', 'F', 'G', 'H'], cordY = 1;
		// создаем необходимые переменные и массивы
		for (let i = massOnce.length + 1; i+1 > 0 ; i--) { // добавляем id с конца id = [massXOnce[x] + номер(cordY)]
			if (inc == -1) {// если прошло 4 итерации то "поднимаемся" наверх по доске и нужно заново пройти по буквам с новой цифрой
				inc = 3;
				cordY++;
			}
			$(massOnce[i]).attr('id', massXOnce[inc] + cordY);
			$(massSecond[i]).attr('id', massXSecond[inc] + cordY);
			inc--;
		}
	})
	let globals,
		massX = ['A', 'B', 'C', 'D', 'E', 
		'F', 'G', 'H'],
		massY = [1, 2, 3, 4, 5, 6, 7, 8];
	window.onload = function () { // ждем загрузки страницы

		$('.tab').click(function(){
			$('.blue').removeClass('blue');
			$(this).addClass('blue');
			$('.green').removeClass('green'); // удаляем у всех элементов класс green

			let arrN = $(this).attr('id'); // Берем id  а дальше все как в задаче №2.
			if (arrN.length !== 2 || !(massX.indexOf(arrN[0]) + 1) || !(massY.indexOf(+arrN[1]) + 1))
			return alert('Ведите координаты. ' +
				'Первый символ - буква латинского '+
				'алфавита от A до H, второй - число от 1 до 8'); // введенные строка должна быть строго 2 символа.
			let lefRight = searchPos(true),
				topBottom = searchPos(false);

			resVal2 = lefRight(arrN[0], +arrN[1], false) +
				lefRight(arrN[0], +arrN[1], true) + ' '	+ 							
				topBottom(+arrN[1], arrN[0], false).split("").reverse().join("") + 	// необходимо для корректного 
				topBottom(+arrN[1], arrN[0], true).split("").reverse().join("");   // отображения вида В2, а не 2B

			let mass = resVal2.match(/[A-Z][0-9]/g); //возвращается строка, поэтому вырезаем простым выражением символ+цифра

			$(mass).each(function(index, value){ // каждому элементу по id
				$('#'+value).addClass('green');  // добавляем класс green
			})
		})
	}
	// функция из задачи №2.
function searchPos(flag) { //  зависимости от флага массивы будут отличаться
	let massX, massY;	   // необходимо для использования одной функции как д
	
	if (flag) {
		massX = ['A', 'B', 'C', 'D', 'E', 
				'F', 'G', 'H'],
		massY = [1, 2, 3, 4, 5, 6, 7, 8];
	} else {
		massX = [1, 2, 3, 4, 5, 6, 7, 8],
		massY = ['A', 'B', 'C', 'D', 'E', 
				'F', 'G', 'H'];
	}

	return function(elemMassX, elemMassY, flag) {
		
		if ((massX.indexOf(elemMassX) + (flag ? 2 : -2)) < 0) return '';
		
		let XPosit = massX.indexOf(elemMassX) + (flag ? 2 : -2), // присваиваем значение на 2 меньше
			YPosit = massY.indexOf(elemMassY),
			resultString = "",
			TopPosit, BotPosit;
		
		TopPosit = (8 > (YPosit - 1)) && ((YPosit - 1) > -1) ? massY.indexOf(elemMassY) - 1 : -1; // привсваиваем точку по оси Y
		BotPosit = (8 > (YPosit + 1)) && ((YPosit + 1) > -1) ? massY.indexOf(elemMassY) + 1 : -1; // соответственно +-1, иначе 0
		resultString = !(TopPosit + 1) ? '' : ' '+massX[XPosit] + massY[TopPosit] + ' '; // если коордниты не входят в массив,
		resultString += !(BotPosit + 1) ? '' : ' '+massX[XPosit] + massY[BotPosit];	 // привсваиваем пустую строку 
		
		return resultString;
	}
}


</script>

<style>
	
	.container {
		border: 1px solid black;
	}
	.tabs, .chars {
		height: 10vw;
		padding-top: 5vw;
		color: grey;
		font-weight: bold;
		font-size: 25px;
		padding-left: 10px;
	}
	.chars {
		height: unset;
		padding-top: unset;
	}
	.once > .line > .tab:nth-child(2n+1) {
		background-color: black;
	}

	.once > .line_us > .tab:nth-child(2n) {
		background-color: black;
	}
	.second > .line > .tab:nth-child(2n) {
		background-color: black;
	}

	.second > .line_us > .tab:nth-child(2n+1) {
		background-color: black;
	}
	.color_final {
		opacity: 0.4;
	}
	.button_start {
		background-color: #e7e7e7;
	}
	.tab.color_black {
		background-color: black;
	}
	.tab {
		border: 1px solid black;
		height: 10vw;
		background-color: white;
	}
	.second > .line_us > .tab.green, .second > .line > .tab.green,
	.once > .line_us > .tab.green, .once > .line > .tab.green {
		background-color: green;
	}
	.second > .line_us > .tab.blue, .second > .line > .tab.blue,
	.once > .line_us > .tab.blue, .once > .line > .tab.blue {
		background-color: blue;
	}
</style>
</body>
</html>